# YouTube cleanup tool

# What is it
A tool to manage playlists locally - then sync those changes to the YouTube api

I made this initially to clean google play music / YouTube music likes out of the liked YouTube playlist

I'm actively developing this on my stream - [come check it out](https://www.twitch.tv/uNople)

# Why ???

Because I only want my liked videos in my liked videos playlist. If I wanted music there, I would have liked it on YouTube myself

It's also super slow to do anything with playlists, especially when they're massive like mine - so a local tool is way quicker

# What's currently implemented

Saving api credentials to the windows credential manager (so it's not in config or anything)

A console UI to handle getting playlist/video data and save to a Sqlite DB
- Get playlists / playlist items / videos
- Search

To come:
- Actual UI (WPF/Blazor/JS of some kind)
- Playlist updating
	- No permissions given for this yet
	- No methods exist for updating playlists

# how to run

First, you need a api key, and a oauth key.
[Follow the instructions here](https://developers.google.com/identity/protocols/oauth2/openid-connect)
[Developer console here](https://console.developers.google.com/?pli=1)

Go to Credential manager in windows (Control Panel -> User Accounts -> Credential Manager)

1. Create a `googleapikey` generic credential
   The 'password' field for this should be your google api key
2. Download the JSON for your oauth, and put it in the place that's read in

# Dev notes

## How to add migrations

1. Make your change in YoutubeCleanupTool.Domain
2. Go to package manager console in vs
3. Change project to YoutubeCleanupTool.DataAccess
4. `Add-Migration MigrationName`

## General notes

- The "playlists" returned from YouTube are a mix of YouTube and YouTube music / imported google play music
- Youtube somehow knows how to hide "music" ones
- The Like playlists aren't returned at all (which is why in code I get the LL and LM playlists by name)
  - Liked playlist for YouTube is LL. Liked for YouTube music is LM
- We can get thumbnails for the playlists. Some playlists don't have thumbnails (eg, one or more videos got deleted)
- There seems to to be no way of differentiating between music and video
- Uploaded music migrated from google play is all private - and not accesible on YouTube - even though the playlist is on YouTube
- There's an option in https://music.youtube.com - click your profile icon -> settings -> unselect "Show your liked music from YouTube".
  You can then use the LM playlist to act as the "delete from LL playlist" list
- Deleting a YouTube music like deletes it from your YouTube likes and vice-versa. DISAPPOINTED!
- When getting a video, the following seems to indicate if it's music
   - contentDetails.licensedContent == true -> the ones with "Provided to YouTube by...Auto-generated by YouTube." in the description"
   - topicDetails.topicCategories -> contains https://en.wikipedia.org/wiki/Music is a potential indicator
- But... none of the above really matters. YouTube data api doesn't indicate if something's really music or not.
  Even if something's not in the cateory, etc it *could* be playable on YouTube music probably due to ContentId or flagging.

# Final remarks on differentiating music and video

The 'best' way is to match the description, and check it matches the pattern "Provided to YouTube by.*Auto-generated by YouTube."

Category comes next - having the music category is a good indicator that the video should be playable on YouTube music

But, there's no guarantee that it's 'only' music - there seems to be no way of telling if something is music-only, and not playable
  on YouTube proper

Also, when you remove a video from the YouTube likes playlist, and it's designated music, it gets removed from the LL (YouTube Music liked playlist)

Potentially... you could like a video, and check to see if it appears in the LL playlist. If it does, then it's MUSIC.